<div class="container">
    <!-- Header -->
    <header class="header">
        <button class="back-btn" (click)="goBack()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 18L9 12L15 6" stroke="white" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" />
            </svg>
        </button>
        <div class="header-center">
            <span class="booking-id">{{ bookingId }}</span>
        </div>
        <button class="notification-btn" (click)="openNotifications()">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
            <span class="dot"></span>
        </button>
    </header>

    <h1 class="page-title">Rental Payment</h1>

    <!-- Main Content centered -->
    <div class="main-content">
        @if(loading) {
        <p class="loading-text">Loading invoice...</p>
        }

        @if(!loading && invoice) {
        <!-- Illustration -->
        <div class="illustration-container">
            <img src="assets/images/paymentcheckout.png" alt="Payment Illustration" class="illustration"
                onerror="this.src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwIiB5PSI1MCIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iI2NjYyI+UGxhY2Vob2xkZXI8L3RleHQ+PC9zdmc+'">
        </div>

        <p class="invoice-label">{{ invoice.invoice_number }}</p>
        <h2 class="section-label">Total amount</h2>
        <h1 class="total-amount">Rs.{{ totalAmount | number:'1.0-0' }}</h1>
        }

        @if(!loading && !invoice) {
        <p class="loading-text">Invoice not found.</p>
        }
    </div>

    <!-- Footer actions -->
    @if(!loading && invoice) {
    <div class="footer">
        <button class="btn-proceed" (click)="proceedToPay()" [disabled]="processingPayment">
            {{ processingPayment ? 'Opening...' : 'Proceed to pay' }}
        </button>
        <button class="btn-raise-issue" (click)="raiseIssue()">Raise an issue</button>
    </div>
    }
</div>